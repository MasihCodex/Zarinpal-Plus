using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ZarinpalPlus.Models;

namespace ZarinpalPlus.Services
{
    public class StatusHelper
    {
        String JsonModels = "[\r\n  {\r\n    \"StatusCode\": -9,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"خطای اعتبار سنجی1- مرچنت کد داخل تنظیمات وارد نشده باشد-2 آدرس بازگشت (callbackurl) وارد نشده باشد -3 توضیحات (description ) وارد نشده باشد و یا از حد مجاز 500 کارکتر بیشتر باشد -4 مبلغ پرداختی کمتر یا بیشتر از حد مجاز\",\r\n      \"English\": \"Validation error\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -10,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"ای پی یا مرچنت كد پذیرنده صحیح نیست.\",\r\n      \"English\": \"Terminal is not valid, please check merchant_id or ip address.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -11,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"مرچنت کد فعال نیست، پذیرنده مشکل خود را به امور مشتریان زرین‌پال ارجاع دهد.\",\r\n      \"English\": \"Terminal is not active, please contact our support team.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -12,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"تلاش بیش از دفعات مجاز در یک بازه زمانی کوتاه به امور مشتریان زرین پال اطلاع دهید\",\r\n      \"English\": \"To many attempts, please try again later.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -15,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"درگاه پرداخت به حالت تعلیق در آمده است، پذیرنده مشکل خود را به امور مشتریان زرین‌پال ارجاع دهد.\",\r\n      \"English\": \"Terminal user is suspend : (please contact our support team).\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -16,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"سطح تایید پذیرنده پایین تر از سطح نقره ای است.\",\r\n      \"English\": \"Terminal user level is not valid : ( please contact our support team).\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -17,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"محدودیت پذیرنده در سطح آبی\",\r\n      \"English\": \"Terminal user level is not valid : ( please contact our support team).\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": 100,\r\n    \"Status\": \"Success\",\r\n    \"Type\": \"public\",\r\n    \"Messages\": {\r\n      \"Persion\": \"عملیات موفق\",\r\n      \"English\": \"Success\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -30,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"پذیرنده اجازه دسترسی به سرویس تسویه اشتراکی شناور را ندارد.\",\r\n      \"English\": \"Terminal do not allow to accept floating wages.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -31,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"حساب بانکی تسویه را به پنل اضافه کنید. مقادیر وارد شده برای تسهیم درست نیست. پذیرنده جهت استفاده از خدمات سرویس تسویه اشتراکی شناور، باید حساب بانکی معتبری به پنل کاربری خود اضافه نماید.\",\r\n      \"English\": \"Terminal do not allow to accept wages, please add default bank account in panel.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -32,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"مبلغ وارد شده از مبلغ کل تراکنش بیشتر است.\",\r\n      \"English\": \"Wages is not valid, Total wages(floating) has been overload max amount.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -33,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"درصدهای وارد شده صحیح نیست.\",\r\n      \"English\": \"Wages floating is not valid.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -34,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"مبلغ وارد شده از مبلغ کل تراکنش بیشتر است.\",\r\n      \"English\": \"Wages is not valid, Total wages(fixed) has been overload max amount.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -35,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"تعداد افراد دریافت کننده تسهیم بیش از حد مجاز است.\",\r\n      \"English\": \"Wages is not valid, Total wages(floating) has been reached the limit in max parts.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -36,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"حداقل مبلغ جهت تسهیم باید ۱۰۰۰۰ ریال باشد\",\r\n      \"English\": \"The minimum amount for wages(floating) should be 10,000 Rials\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -37,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"یک یا چند شماره شبای وارد شده برای تسهیم از سمت بانک غیر فعال است.\",\r\n      \"English\": \"One or more iban entered for wages(floating) from the bank side are inactive.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -38,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"خطا٬عدم تعریف صحیح شبا٬لطفا دقایقی دیگر تلاش کنید.\",\r\n      \"English\": \"Wages need to set Iban in shaparak.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -39,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"خطایی رخ داده است به امور مشتریان زرین پال اطلاع دهید\",\r\n      \"English\": \"Wages have a error!\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -40,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"\",\r\n      \"English\": \"Invalid extra params, expire_in is not valid.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -41,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentRequest\",\r\n    \"Messages\": {\r\n      \"Persion\": \"حداکثر مبلغ پرداختی ۱۰۰ میلیون تومان است\",\r\n      \"English\": \"Maximum amount is 100,000,000 tomans.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -50,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"مبلغ پرداخت شده با مقدار مبلغ ارسالی در متد وریفای متفاوت است.\",\r\n      \"English\": \"Session is not valid, amounts values is not the same.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -51,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"پرداخت ناموفق\",\r\n      \"English\": \"Session is not valid, session is not active paid try.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -52,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"خطای غیر منتظره‌ای رخ داده است. پذیرنده مشکل خود را به امور مشتریان زرین‌پال ارجاع دهد.\",\r\n      \"English\": \"Oops!!, please contact our support team\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -53,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"پرداخت متعلق به این مرچنت کد نیست.\",\r\n      \"English\": \"Session is not this merchant_id session\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -54,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"اتوریتی نامعتبر است.\",\r\n      \"English\": \"Invalid authority.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": -55,\r\n    \"Status\": \"Error\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"تراکنش مورد نظر یافت نشد\",\r\n      \"English\": \"manual payment request not found.\"\r\n    }\r\n  },\r\n  {\r\n    \"StatusCode\": 101,\r\n    \"Status\": \"Success\",\r\n    \"Type\": \"PaymentVerify\",\r\n    \"Messages\": {\r\n      \"Persion\": \"تراکنش وریفای شده است.\",\r\n      \"English\": \"Verified\"\r\n    }\r\n  }\r\n]";

        public List<StatusModel>? StatusModels { get; private set; }

        public StatusHelper()
        {
            StatusModels = JsonConvert.DeserializeObject<List<StatusModel>>(JsonModels);

            SaveTable();
        }

        public StatusModel? MapFromStatus(int Status)
        {
            var Model = StatusModels?.First(X => X.StatusCode == Status);

            return Model;
        }

        public void SaveTable()
        {
            var Tb = new StringBuilder();

            Tb.AppendLine("| پیام فارسی | وضعیت | کد وضعیت | نوع |");
            Tb.AppendLine("| :---: | :---: | :---: | ---: |");

            foreach (var X in StatusModels)
            {
                Tb.AppendLine($"| {X.Type} | {X.Status} | {X.StatusCode} | {X.Messages.Persion} |");
            }

            var z = Tb.ToString();
        }
    }
}
